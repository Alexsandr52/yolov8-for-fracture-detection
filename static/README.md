
# Поиск переломов на рентгеновском снимке Python.

Этот репозиторий содержит код для обучения и развёртывания модели обнаружения переломов на основе архитектуры YOLOv8 с использованием Flask для вывода результатов.

![alt text](../image.png)

### Начало работы
Эти инструкции помогут вам запустить проект на вашем компьютере для разработки и тестирования.

Предварительные требования:
- Docker
- NVIDIA GPU (опционально, для ускоренного обучения) можно и CPU
- Python 3.7 или выше

### Установка
1. Склонируйте репозиторий:
```bash
git clone https://github.com/Alexsandr52/yolov8-for-fracture-detection
cd yolov8-for-fracture-detection
```
2. Соберите Docker образ:
```bash
docker build -t yolo-detection .
```

### Обучение
Чтобы обучить модель YOLOv8, выполните следующие шаги:

1. Перейдите в каталог model_train_colab_code.
2. Откройте и выполните ноутбук с обучением, в google colab.
3. Убедитесь, что необходимые пути к данным и конфигурации правильно установлены.
4. Запустите ноутбук для начала обучения.

### Запуск сервиса
1. Убедитесь, что Docker контейнер запущен:
```bash
docker run -p 8080:8080 yolo-detection
```
2. После запуска контейнера вы можете получить доступ к сервису по адресу http://localhost:8080.
3. **Веб-интерфейс**: Откройте http://localhost:8080 в браузере для использования графического интерфейса загрузки изображений.

#### API Endpoints:
- **GET /** - Веб-интерфейс для загрузки и анализа изображений
- **POST /predict** - API для программного доступа (отправьте изображение для получения результатов)

### Примеры использования
```bash
# Загрузка изображения и отправка HTTP POST запроса к сервису
curl -X POST -F "file=@путь/к/изображению.jpg" http://localhost:8080/predict

```

```python
import requests

# Загрузка изображения
image_path = "путь/к/изображению.jpg"
image_data = open(image_path, "rb")

# Отправка HTTP POST запроса к сервису
files = {"image": image_data}
response = requests.post("http://localhost:8080/predict", files=files)

# Обработка ответа
if response.status_code == 200:
    detection_results = response.json()
    print(detection_results)
else:
    print("Ошибка при отправке запроса:", response.status_code)

```

### Ответ
В ответ прейдёт json. Внутри boxes будут массивы как в примере. В зависимости от количества переломов  количество массивов тоже изменяется.
```bash
{
  "boxes": [
    [X, Y, W, H], ...
   ]
}
```

### Строение проекта
- YOLOv8 - Архитектура модели обнаружения объектов
- Flask - Веб-фреймворк для обслуживания модели
- Docker - Контейнеризация для удобного развёртывания
- **templates/index.html** - HTML-шаблон веб-интерфейса
- **static/style.css** - Стили для профессионального вида
- **static/script.js** - JavaScript для загрузки изображений и визуализации результатов
